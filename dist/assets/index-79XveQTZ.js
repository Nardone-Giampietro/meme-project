var k=Object.defineProperty;var M=(t,e,n)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var d=(t,e,n)=>(M(t,typeof e!="symbol"?e+"":e,n),n),v=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var a=(t,e,n)=>(v(t,e,"read from private field"),n?n.call(t):e.get(t)),c=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},x=(t,e,n,o)=>(v(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n);var l=(t,e,n)=>(v(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const E of s.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&o(E)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var g,S,p,C;class U{constructor(e,n,o){c(this,g);c(this,p);d(this,"element",document.createElement("form"));d(this,"header",document.createElement("header"));d(this,"heading",document.createElement("h2"));d(this,"submitButton",document.createElement("button"));this.element.type=e,this.content=o,this.heading.innerHTML=`<strong>${n}</strong>`,this.submitButton.textContent="Submit",l(this,g,S).call(this),l(this,p,C).call(this)}}g=new WeakSet,S=function(){this.heading.style.display="flex",this.heading.style.justifyContent="center",this.submitButton.type="submit",this.element.style.display="flex",this.element.style.flexDirection="column",this.element.style.alignItems="center",this.element.style.gap="1rem",this.submitButton.setAttribute("class","primary")},p=new WeakSet,C=function(){this.header.appendChild(this.heading),this.element.appendChild(this.header),this.element.appendChild(this.content),this.element.appendChild(this.submitButton)};var r,f,T,y,I;class b{constructor(e,n,o){c(this,f);c(this,y);d(this,"openButton",document.createElement("button"));d(this,"closeButton",document.createElement("input"));d(this,"dialog",document.createElement("dialog"));c(this,r,void 0);this.name=e,this.parentElement=n,this.content=o,this.openButton.textContent=this.name,this.closeButton.value="Close",this.closeButton.type="button",this.closeButton.classList="secondary",l(this,y,I).call(this),l(this,f,T).call(this)}addSubmitEvent(e){a(this,r).submitButton.addEventListener("click",e)}render(){this.parentElement.appendChild(this.openButton),this.parentElement.appendChild(this.dialog)}}r=new WeakMap,f=new WeakSet,T=function(){const e=document.createElement("article");x(this,r,new U("submit",this.name,this.content)),e.appendChild(a(this,r).element),e.appendChild(this.closeButton),a(this,r).submitButton.addEventListener("click",n=>{n.preventDefault(),this.dialog.close()}),this.dialog.appendChild(e)},y=new WeakSet,I=function(){this.openButton.addEventListener("click",()=>{this.dialog.showModal()}),this.closeButton.addEventListener("click",()=>{this.dialog.close()})};async function F(){return await navigator.mediaDevices.getUserMedia({video:!0})}async function H(t){const e=document.createElement("video");return e.srcObject=t,await e.play(),{video:e,videoHeight:e.videoHeight,videoWidth:e.videoWidth}}function O(t,e){e.getContext("2d").drawImage(t,0,0)}function P(t,e,n){const o=n.getContext("2d"),i=n.width/2,s=n.height;o.clearRect(0,0,n.width,n.height),o.font="50px Impact",o.textAlign="center",o.strokeStyle="rgb(255, 255, 255)",o.lineWidth=4,o.strokeText(t,i,50),o.fillStyle="rgb(0, 0, 0)",o.fillText(t,i,50),o.textAlign="center",o.strokeStyle="rgb(255, 255, 255)",o.lineWidth=4,o.strokeText(e,i,s-5),o.fillStyle="rgb(0, 0, 0)",o.fillText(e,i,s-5)}const W=480,_=480,B=document.querySelector("html"),D=document.querySelector("#download-button"),N=document.getElementById("toggle"),w=document.getElementById("options"),V=document.getElementById("up-text"),q=document.getElementById("down-text"),u=document.getElementById("merge"),m=document.getElementById("canvas-image"),h=document.getElementById("canvas-text"),R=document.querySelector("#dark-mode"),j=document.getElementById("words");N.addEventListener("change",G);const X=new b("Settings",w,R),L=new b("Update Text",w,j);X.render();L.render();L.addSubmitEvent(K);A(W,_);F().then(t=>H(t)).then(t=>{const e=new b("Take Photo",w,t.video);A(t.videoWidth,t.videoHeight),e.render(),e.addSubmitEvent(()=>{O(t.video,m)})}).catch(t=>{console.log(t)});D.addEventListener("click",z);function z(t){t.preventDefault();const e=document.createElement("a"),n=u.getContext("2d");n.drawImage(m,0,0),n.drawImage(h,0,0);const o=u.toDataURL("image/png");e.href=o,e.download="meme-me",e.click(),e.remove()}function G(){const e=B.getAttribute("data-theme")==="dark"?"light":"dark";B.setAttribute("data-theme",e)}function K(){const t=V.value.toString().toUpperCase(),e=q.value.toString().toUpperCase();P(t,e,h)}function A(t,e){h.width=t,h.height=e,m.width=t,m.height=e,u.width=t,u.height=e}
